{
  "version": 3,
  "sources": ["../messages/message-functions.js", "../messages/message.js", "../views/tables/tables-functions.js", "../views/tables/tables.js", "../index.js"],
  "sourcesContent": ["function removePopup(viewKey) {\r\n    $('#' + viewKey + ' .popup-message').remove();\r\n}\r\n\r\nfunction addPopup(viewKey, message, popupType) {\r\n    var divSelector = $('#' + viewKey);\r\n\r\n    // Create the popup container element\r\n    var popup = $('<div>').addClass('popup-message');\r\n\r\n    // Create the message div\r\n    var messageDiv = $('<div>').html(message).css({\r\n        marginBottom: '20px',\r\n        fontSize: '18px',\r\n        color: '#fff'\r\n    });\r\n\r\n    // Create the progress bar container and bar\r\n    var progressBarContainer = $('<div>').addClass('progress-bar-container');\r\n    var progressBar = $('<div>').attr('id', 'popup-progress-bar-' + viewKey).addClass('popup-progress-bar');\r\n    var progressText = $('<div>').attr('id', 'progress-text-' + viewKey).addClass('progress-text').text('0%');\r\n\r\n    progressBarContainer.append(progressBar);\r\n    progressBarContainer.append(progressText);\r\n    popup.append(messageDiv);\r\n    if (popupType === 'progress') {\r\n        popup.append(progressBarContainer);\r\n        console.log('progress popup')\r\n    }\r\n\r\n    // Create spinner widget\r\n    var spinnerContainer = $('<div>').addClass('spinner-container');\r\n    var spinner = $('<i>').addClass('fa fa-spinner fa-spin spinner').attr('id', 'popup-spinner-' + viewKey);\r\n    spinnerContainer.append(spinner)\r\n    if (popupType === 'spinner') {\r\n        popup.append(spinnerContainer);\r\n        console.log('spinner popup')\r\n    }\r\n\r\n    console.log(popup.html())\r\n\r\n    divSelector.css('position', 'relative').append(popup);\r\n}\r\n\r\nfunction updatePopupProgress(viewKey, progress) {\r\n    $('#popup-progress-bar-' + viewKey).css('width', progress + '%');\r\n    $('#progress-text-' + viewKey).text(Math.round(progress) + '%');\r\n}\r\n\r\nconst popup = {\r\n    add: (viewKey, message, popupType) => addPopup(viewKey, message, popupType),\r\n    remove: (viewKey) => removePopup(viewKey),\r\n    update: (viewKey, progress) => updatePopupProgress(viewKey, progress)\r\n}\r\n\r\nexport {popup}", "\r\nimport { popup } from \"./message-functions.js\";\r\n\r\n// overlay\r\n\r\n\r\n// popup\r\n\r\n\r\n\r\n\r\n// progress\r\n\r\nconst msg = {\r\n    popup: popup\r\n}\r\n\r\nexport {msg}", "// add tick boxes to table \r\n\r\nexport function addCheckboxes(view) {\r\n    // Add checkbox to the header to select/unselect all\r\n    $('#' + view.key + ' .kn-table thead tr').prepend('<th><input type=\"checkbox\"></th>');\r\n\r\n    // Add checkbox to each row in the table body\r\n    $('#' + view.key + ' .kn-table tbody tr').each(function () {\r\n        if (!$(this).hasClass('kn-table-group')) {\r\n            $(this).prepend('<td><input type=\"checkbox\"></td>');\r\n        } else {\r\n            $(this).prepend('<td></td>'); // Append an empty <td>\r\n        }\r\n    });\r\n}\r\n\r\n// function to handle changes on theadcheckbox\r\n\r\nexport function handleHeaderCheckboxChange(view, selectionRules) {\r\n    // handle default with no specifeid selction rules\r\n    selectionRules = selectionRules || (() => true);\r\n    // Add change event listener to the thead checkbox\r\n    $('#' + view.key + ' .kn-table thead input[type=\"checkbox\"]').change(function () {\r\n        var isChecked = $(this).prop('checked');\r\n        // Iterate over all checkboxes in tbody\r\n        $('#' + view.key + ' .kn-table tbody tr:not(.kn-table-group) input[type=\"checkbox\"]').each(function () {\r\n            var selectBasedOnRules = selectionRules()\r\n            // Set checkbox status based on the thead checkbox and autoselect\r\n            $(this).prop('checked', isChecked && selectBasedOnRules);\r\n        });\r\n    });\r\n}\r\n\r\nexport function getTableCheckedRecords(view) {\r\n\r\n    const checkedRecords = []\r\n\r\n    $('#' + view.key + ' .kn-table tbody tr:not(.kn-table-group) input[type=\"checkbox\"]').each(function () {\r\n        var isChecked = $(this).prop('checked');\r\n        if (isChecked) {\r\n            var id = $(this).closest('tr').attr('id');\r\n            checkedRecords.push({ id: id })\r\n        }\r\n    });\r\n\r\n    return checkedRecords\r\n\r\n}\r\n\r\nexport function addFilterToTableView(view, newFilter) {\r\n    const filters = Knack.views[view.key].getFilters();\r\n    let newFilters;\r\n    if (filters.match) {\r\n        filters.rules.push(newFilter);\r\n        newFilters = JSON.parse(JSON.stringify(filters));\r\n    } else if (filters.length) {\r\n        filters.push(newFilter);\r\n        newFilters = {\r\n            match: 'and',\r\n            rules: JSON.parse(JSON.stringify(filters))\r\n        }\r\n    } else {\r\n        newFilters = [newFilter];\r\n    }\r\n    Knack.views[view.key].handleChangeFilters(JSON.stringify(newFilters));\r\n}\r\n\r\nexport function reRenderTableOrCalendar(view) {\r\n    var originalFilters = JSON.stringify(Knack.views[view.key].getFilters());\r\n    Knack.views[view.key].handleChangeFilters(originalFilters)\r\n}", "\r\nimport { addCheckboxes } from \"./tables-functions.js\";\r\nimport { handleHeaderCheckboxChange } from \"./tables-functions.js\";\r\nimport { getTableCheckedRecords } from \"./tables-functions.js\";\r\nimport { addFilterToTableView } from \"./tables-functions.js\";\r\nimport { reRenderTableOrCalendar } from \"./tables-functions.js\";\r\n\r\nexport const tables = {\r\n    addCheckboxes : (view) => addCheckboxes(view),\r\n    addHeadEventHandler: (view, rules) => handleHeaderCheckboxChange(view, rules),\r\n    getChechedRecords: (view) => getTableCheckedRecords(view),\r\n    addFilters :(view, filters) => addFilterToTableView(view, filters),\r\n    reRender: (view) => reRenderTableOrCalendar(view), \r\n}\r\n", "import { msg } from \"./messages/message.js\";\r\nimport { tables } from \"./views/tables/tables.js\";\r\n\r\n\r\n// construct the message object\r\nconst knackInterface = {\r\n    msg: msg,\r\n    views: {\r\n        tables: tables\r\n    }\r\n}\r\n\r\nexport {knackInterface}"],
  "mappings": "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",
  "names": ["popup"]
}
